import{SvelteElement,add_render_callback,append,attr,attribute_to_object,binding_callbacks,bubble,check_outros,create_bidirectional_transition,destroy_each,detach,element,empty,flush,group_outros,init,insert,listen,noop,not_equal,run_all,set_custom_element_data,set_data,set_input_value,space,stop_propagation,text,toggle_class,transition_in,transition_out}from"../../packages/svelte/internal/index.mjs";import logger from"../../packages/@heimdall/utils/lib/logger.mjs";import{tick}from"../../packages/svelte/internal/index.mjs";import{quintInOut}from"../../packages/svelte/easing/index.mjs";import{fade}from"../../packages/svelte/transition/index.mjs";import Fuse from"../../packages/fuse.js/dist/fuse.basic.esm.min.js";import{render as renderMessage}from"../../packages/@heimdall/utils/lib/template_string.mjs";import{debounce}from"../../packages/@heimdall/utils/lib/function.mjs";import{escapeRegExp}from"../../packages/@heimdall/utils/lib/string.mjs";import"../loading_animation/index.js";import"../user_tag/index.js";import"../word_tag/index.js";function get_each_context(t,e,n){const i=t.slice();return i[47]=e[n],i}function get_each_context_1(t,e,n){const i=t.slice();return i[50]=e[n],i}function get_each_context_2(t,e,n){const i=t.slice();return i[53]=e[n],i}function create_if_block_4(t){let e,n,i,o=t[0]&&create_if_block_6(t),a=t[7]&&create_if_block_5(t);return{c(){o&&o.c(),e=space(),a&&a.c(),n=empty()},m(t,r){o&&o.m(t,r),insert(t,e,r),a&&a.m(t,r),insert(t,n,r),i=!0},p(t,i){t[0]?o?(o.p(t,i),1&i[0]&&transition_in(o,1)):(o=create_if_block_6(t),o.c(),transition_in(o,1),o.m(e.parentNode,e)):o&&(group_outros(),transition_out(o,1,1,(()=>{o=null})),check_outros()),t[7]?a?(a.p(t,i),128&i[0]&&transition_in(a,1)):(a=create_if_block_5(t),a.c(),transition_in(a,1),a.m(n.parentNode,n)):a&&(group_outros(),transition_out(a,1,1,(()=>{a=null})),check_outros())},i(t){i||(transition_in(o),transition_in(a),i=!0)},o(t){transition_out(o),transition_out(a),i=!1},d(t){o&&o.d(t),t&&detach(e),a&&a.d(t),t&&detach(n)}}}function create_if_block_6(t){let e,n,i=t[0].tags,o=[];for(let e=0;e<i.length;e+=1)o[e]=create_each_block_2(get_each_context_2(t,i,e));const a=t=>transition_out(o[t],1,1,(()=>{o[t]=null}));return{c(){for(let t=0;t<o.length;t+=1)o[t].c();e=empty()},m(t,i){for(let e=0;e<o.length;e+=1)o[e]&&o[e].m(t,i);insert(t,e,i),n=!0},p(t,n){if(4097&n[0]){let r;for(i=t[0].tags,r=0;r<i.length;r+=1){const a=get_each_context_2(t,i,r);o[r]?(o[r].p(a,n),transition_in(o[r],1)):(o[r]=create_each_block_2(a),o[r].c(),transition_in(o[r],1),o[r].m(e.parentNode,e))}for(group_outros(),r=i.length;r<o.length;r+=1)a(r);check_outros()}},i(t){if(!n){for(let t=0;t<i.length;t+=1)transition_in(o[t]);n=!0}},o(t){o=o.filter(Boolean);for(let t=0;t<o.length;t+=1)transition_out(o[t]);n=!1},d(t){destroy_each(o,t),t&&detach(e)}}}function create_each_block_2(t){let e,n,i,o,a,r,s;return{c(){e=element("word-tag"),set_custom_element_data(e,"class","tag sky"),set_custom_element_data(e,"label",n=t[53]),set_custom_element_data(e,"textbelow",i=!0)},m(n,i){insert(n,e,i),a=!0,r||(s=listen(e,"remove",t[12]),r=!0)},p(i,o){t=i,(!a||1&o[0]&&n!==(n=t[53]))&&set_custom_element_data(e,"label",n)},i(t){a||(add_render_callback((()=>{a&&(o||(o=create_bidirectional_transition(e,fade,{duration:TRANSITION_DURATION,easing:quintInOut},!0)),o.run(1))})),a=!0)},o(t){o||(o=create_bidirectional_transition(e,fade,{duration:TRANSITION_DURATION,easing:quintInOut},!1)),o.run(0),a=!1},d(t){t&&detach(e),t&&o&&o.end(),r=!1,s()}}}function create_if_block_5(t){let e,n,i=t[7],o=[];for(let e=0;e<i.length;e+=1)o[e]=create_each_block_1(get_each_context_1(t,i,e));const a=t=>transition_out(o[t],1,1,(()=>{o[t]=null}));return{c(){for(let t=0;t<o.length;t+=1)o[t].c();e=empty()},m(t,i){for(let e=0;e<o.length;e+=1)o[e]&&o[e].m(t,i);insert(t,e,i),n=!0},p(t,n){if(8320&n[0]){let r;for(i=t[7],r=0;r<i.length;r+=1){const a=get_each_context_1(t,i,r);o[r]?(o[r].p(a,n),transition_in(o[r],1)):(o[r]=create_each_block_1(a),o[r].c(),transition_in(o[r],1),o[r].m(e.parentNode,e))}for(group_outros(),r=i.length;r<o.length;r+=1)a(r);check_outros()}},i(t){if(!n){for(let t=0;t<i.length;t+=1)transition_in(o[t]);n=!0}},o(t){o=o.filter(Boolean);for(let t=0;t<o.length;t+=1)transition_out(o[t]);n=!1},d(t){destroy_each(o,t),t&&detach(e)}}}function create_each_block_1(t){let e,n,i,o,a,r,s;return{c(){e=element("user-tag"),set_custom_element_data(e,"class","sky"),set_custom_element_data(e,"user",n=t[50].serialized),set_custom_element_data(e,"anonymized",i=!0)},m(n,i){insert(n,e,i),a=!0,r||(s=listen(e,"remove",t[13]),r=!0)},p(i,o){t=i,(!a||128&o[0]&&n!==(n=t[50].serialized))&&set_custom_element_data(e,"user",n)},i(t){a||(add_render_callback((()=>{a&&(o||(o=create_bidirectional_transition(e,fade,{duration:TRANSITION_DURATION,easing:quintInOut},!0)),o.run(1))})),a=!0)},o(t){o||(o=create_bidirectional_transition(e,fade,{duration:TRANSITION_DURATION,easing:quintInOut},!1)),o.run(0),a=!1},d(t){t&&detach(e),t&&o&&o.end(),r=!1,s()}}}function create_if_block_1(t){let e,n,i,o,a,r=t[5],s=[];for(let e=0;e<r.length;e+=1)s[e]=create_each_block(get_each_context(t,r,e));const c=t=>transition_out(s[t],1,1,(()=>{s[t]=null}));return{c(){e=element("div");for(let t=0;t<s.length;t+=1)s[t].c();attr(e,"class","completion border-box absolute animated flex flex-column left-0 hstretch")},m(n,r){insert(n,e,r);for(let t=0;t<s.length;t+=1)s[t]&&s[t].m(e,null);i=!0,o||(a=listen(e,"mouseover",t[11]),o=!0)},p(n,i){if(t=n,98400&i[0]){let n;for(r=t[5],n=0;n<r.length;n+=1){const o=get_each_context(t,r,n);s[n]?(s[n].p(o,i),transition_in(s[n],1)):(s[n]=create_each_block(o),s[n].c(),transition_in(s[n],1),s[n].m(e,null))}for(group_outros(),n=r.length;n<s.length;n+=1)c(n);check_outros()}},i(t){if(!i){for(let t=0;t<r.length;t+=1)transition_in(s[t]);add_render_callback((()=>{i&&(n||(n=create_bidirectional_transition(e,fade,{duration:TRANSITION_DURATION,easing:quintInOut},!0)),n.run(1))})),i=!0}},o(t){s=s.filter(Boolean);for(let t=0;t<s.length;t+=1)transition_out(s[t]);n||(n=create_bidirectional_transition(e,fade,{duration:TRANSITION_DURATION,easing:quintInOut},!1)),n.run(0),i=!1},d(t){t&&detach(e),destroy_each(s,t),t&&n&&n.end(),o=!1,a()}}}function create_if_block_3(t){let e,n,i,o,a,r,s;return{c(){e=element("word-tag"),set_custom_element_data(e,"class","animated"),set_custom_element_data(e,"label",n=t[47].value),set_custom_element_data(e,"readonly",i=!0),toggle_class(e,"highlighted",t[6]===t[47])},m(n,i){insert(n,e,i),a=!0,r||(s=listen(e,"select",t[15]),r=!0)},p(i,o){t=i,(!a||32&o[0]&&n!==(n=t[47].value))&&set_custom_element_data(e,"label",n),(!a||96&o[0])&&toggle_class(e,"highlighted",t[6]===t[47])},i(t){a||(add_render_callback((()=>{a&&(o||(o=create_bidirectional_transition(e,fade,{duration:TRANSITION_DURATION,easing:quintInOut},!0)),o.run(1))})),a=!0)},o(t){o||(o=create_bidirectional_transition(e,fade,{duration:TRANSITION_DURATION,easing:quintInOut},!1)),o.run(0),a=!1},d(t){t&&detach(e),t&&o&&o.end(),r=!1,s()}}}function create_if_block_2(t){let e,n,i,o,a,r,s,c;return{c(){e=element("user-tag"),set_custom_element_data(e,"class","hover-fx animated"),set_custom_element_data(e,"user",n=t[47].value.serialized),set_custom_element_data(e,"showname",i=!0),set_custom_element_data(e,"anonymized",o=!0),set_custom_element_data(e,"readonly",""),toggle_class(e,"highlighted",t[6]===t[47])},m(n,i){insert(n,e,i),r=!0,s||(c=listen(e,"select",t[16]),s=!0)},p(i,o){t=i,(!r||32&o[0]&&n!==(n=t[47].value.serialized))&&set_custom_element_data(e,"user",n),(!r||96&o[0])&&toggle_class(e,"highlighted",t[6]===t[47])},i(t){r||(add_render_callback((()=>{r&&(a||(a=create_bidirectional_transition(e,fade,{duration:TRANSITION_DURATION,easing:quintInOut},!0)),a.run(1))})),r=!0)},o(t){a||(a=create_bidirectional_transition(e,fade,{duration:TRANSITION_DURATION,easing:quintInOut},!1)),a.run(0),r=!1},d(t){t&&detach(e),t&&a&&a.end(),s=!1,c()}}}function create_each_block(t){let e,n,i,o="tag"===t[47].type&&create_if_block_3(t),a="connectee"===t[47].type&&create_if_block_2(t);return{c(){o&&o.c(),e=space(),a&&a.c(),n=empty()},m(t,r){o&&o.m(t,r),insert(t,e,r),a&&a.m(t,r),insert(t,n,r),i=!0},p(t,i){"tag"===t[47].type?o?(o.p(t,i),32&i[0]&&transition_in(o,1)):(o=create_if_block_3(t),o.c(),transition_in(o,1),o.m(e.parentNode,e)):o&&(group_outros(),transition_out(o,1,1,(()=>{o=null})),check_outros()),"connectee"===t[47].type?a?(a.p(t,i),32&i[0]&&transition_in(a,1)):(a=create_if_block_2(t),a.c(),transition_in(a,1),a.m(n.parentNode,n)):a&&(group_outros(),transition_out(a,1,1,(()=>{a=null})),check_outros())},i(t){i||(transition_in(o),transition_in(a),i=!0)},o(t){transition_out(o),transition_out(a),i=!1},d(t){o&&o.d(t),t&&detach(e),a&&a.d(t),t&&detach(n)}}}function create_else_block(t){let e,n,i,o;return{c(){e=element("span"),n=text(t[10]),attr(e,"class","found-items-count border-box absolute animated")},m(t,i){insert(t,e,i),append(e,n),o=!0},p(e,i){t=e,(!o||1024&i[0])&&set_data(n,t[10])},i(t){o||(add_render_callback((()=>{o&&(i||(i=create_bidirectional_transition(e,fade,{duration:TRANSITION_DURATION,easing:quintInOut},!0)),i.run(1))})),o=!0)},o(t){i||(i=create_bidirectional_transition(e,fade,{duration:TRANSITION_DURATION,easing:quintInOut},!1)),i.run(0),o=!1},d(t){t&&detach(e),t&&i&&i.end()}}}function create_if_block(t){let e,n,i;return{c(){e=element("loading-animation"),set_custom_element_data(e,"class","absolute animated")},m(t,n){insert(t,e,n),i=!0},p(t,e){t},i(t){i||(add_render_callback((()=>{i&&(n||(n=create_bidirectional_transition(e,fade,{duration:TRANSITION_DURATION,easing:quintInOut},!0)),n.run(1))})),i=!0)},o(t){n||(n=create_bidirectional_transition(e,fade,{duration:TRANSITION_DURATION,easing:quintInOut},!1)),n.run(0),i=!1},d(t){t&&detach(e),t&&n&&n.end()}}}function create_fragment(t){let e,n,i,o,a,r,s,c,l,d,u,g,m,h=t[9]&&create_if_block_4(t),_=t[8]&&create_if_block_1(t);const p=[create_if_block,create_else_block],f=[];function b(t,e){return t[1]?0:1}return s=b(t),c=f[s]=p[s](t),{c(){e=element("div"),h&&h.c(),n=space(),i=element("input"),a=space(),_&&_.c(),r=space(),c.c(),l=space(),d=element("button"),this.c=noop,attr(e,"class","filters border-box vstretch flex items-center overflow-x-scroll nowrap no-scrollbar"),attr(i,"name","query"),attr(i,"type","text"),attr(i,"pattern",o=validQuery.source),attr(i,"autocorrect","off"),attr(i,"autocomplete","off"),attr(i,"spellcheck","false"),attr(i,"placeholder","|"),attr(i,"class","border-none border-box p0 bold no-focus bg-transparent animated sky vstretch"),attr(d,"class","query-clearer border-box absolute btn animated hover-fx not-visible")},m(o,c){insert(o,e,c),h&&h.m(e,null),t[40](e),insert(o,n,c),insert(o,i,c),t[41](i),set_input_value(i,t[4]),insert(o,a,c),_&&_.m(o,c),insert(o,r,c),f[s].m(o,c),insert(o,l,c),insert(o,d,c),u=!0,g||(m=[listen(i,"input",t[42]),listen(i,"input",t[14]),listen(i,"click",t[20]),listen(i,"blur",t[20]),listen(i,"keydown",t[18]),listen(i,"keydown",t[19]),listen(i,"keyup",stop_propagation(t[39])),listen(d,"click",t[17])],g=!0)},p(t,n){t[9]?h?(h.p(t,n),512&n[0]&&transition_in(h,1)):(h=create_if_block_4(t),h.c(),transition_in(h,1),h.m(e,null)):h&&(group_outros(),transition_out(h,1,1,(()=>{h=null})),check_outros()),16&n[0]&&i.value!==t[4]&&set_input_value(i,t[4]),t[8]?_?(_.p(t,n),256&n[0]&&transition_in(_,1)):(_=create_if_block_1(t),_.c(),transition_in(_,1),_.m(r.parentNode,r)):_&&(group_outros(),transition_out(_,1,1,(()=>{_=null})),check_outros());let o=s;s=b(t),s===o?f[s].p(t,n):(group_outros(),transition_out(f[o],1,1,(()=>{f[o]=null})),check_outros(),c=f[s],c?c.p(t,n):(c=f[s]=p[s](t),c.c()),transition_in(c,1),c.m(l.parentNode,l))},i(t){u||(transition_in(h),transition_in(_),transition_in(c),u=!0)},o(t){transition_out(h),transition_out(_),transition_out(c),u=!1},d(o){o&&detach(e),h&&h.d(),t[40](null),o&&detach(n),o&&detach(i),t[41](null),o&&detach(a),_&&_.d(o),o&&detach(r),f[s].d(o),o&&detach(l),o&&detach(d),g=!1,run_all(m)}}}const spacePattern=/\s+/g,tagPattern=/^[\w -]{2,}$/,validQuery=/^.*\S.+\S.*$/,log=logger.getLogger("shared-lib/component/search_bar"),completionOptions={shouldSort:!0,tokenize:!0,matchAllTokens:!0,threshold:.3,location:0,maxPatternLength:32},tagsCompletionOptions={...completionOptions,keys:["name","aliases"]},connecteesCompletionOptions={...completionOptions,keys:["username"]},resetOffset={offset:0},reset={...resetOffset,text:""},{matches:isPointerDevice}=window.matchMedia("(hover: hover)"),TRANSITION_DURATION=250,MIN_QUERY_LENGTH=3,COMPLETION_MAX_LEN=5;function instance(t,e,n){let i,o,a,r,s,c,l,d,u,g,m,h,_,p,f,b,v,y,k,w,{messages:$}=e,{search:x}=e,{tagaliases:I}=e,{tags:N}=e,{connections:O}=e,{user:T}=e,{activableelement:A}=e,{searching:R=!1}=e,{itemscount:z=0}=e;const q=isPointerDevice?function({target:t,currentTarget:e}){if(t.matches(":is(user-tag, word-tag)")){const i=Array.from(e.querySelectorAll(":scope > :is(user-tag, word-tag)"));n(31,k=i?.findIndex((e=>e===t)))}}:void 0;const S=debounce((function(){void 0===p||0!==p.length&&!o?.match(validQuery)||C({...x,...resetOffset,text:p})}),500);async function D({detail:t}){return log.debug("tag:",t),U({filter:{tags:[...x.tags,t]},selector:"word-tag"})}function j({detail:t}){return log.debug("connecteeId:",t),U({filter:{connectees:[...x.connectees,t]},selector:"user-tag"})}async function U({filter:t,selector:e}){log.debug({filter:t,selector:e}),n(4,p=o?.replace(new RegExp(["\\s*",escapeRegExp(r),"$"].join(""),"i"),"")),log.debug("query:",p);const i={...x,...reset,...t};p?.match(validQuery)&&(i.text=p),P(),C(i),n(32,w=e)}function E(){n(4,p=void 0),C({...x,...reset,connectees:[],tags:[]})}function C(t){const e=new window.CustomEvent("search-update",{detail:t,bubbles:!1});i.dispatchEvent(e)}function P(){n(31,k=void 0)}return t.$$set=t=>{"messages"in t&&n(21,$=t.messages),"search"in t&&n(0,x=t.search),"tagaliases"in t&&n(22,I=t.tagaliases),"tags"in t&&n(23,N=t.tags),"connections"in t&&n(24,O=t.connections),"user"in t&&n(25,T=t.user),"activableelement"in t&&n(26,A=t.activableelement),"searching"in t&&n(1,R=t.searching),"itemscount"in t&&n(27,z=t.itemscount)},t.$$.update=()=>{if(4&t.$$.dirty[0]&&n(33,i=h?.parentNode.host),1&t.$$.dirty[0]&&n(4,p=x?.text),16&t.$$.dirty[0]&&n(35,o=p?.trim()),136314880&t.$$.dirty[0]&&n(10,a=$?renderMessage($.searchNItems,{count:z}):""),16&t.$$.dirty[1]&&n(34,r=o?.split(spacePattern).pop().toLowerCase()),8&t.$$.dirty[1]&&n(36,s=r?.length>=3),1&t.$$.dirty[0]&&n(9,c=x?.tags.length>0||x?.connectees.length>0),4194304&t.$$.dirty[0]|40&t.$$.dirty[1]&&n(37,m=s&&r.match(tagPattern)?I?.[r]||r:void 0),8388609&t.$$.dirty[0]|64&t.$$.dirty[1])if(m&&N&&x){const t=N.filter((({name:t})=>!x.tags.includes(t))),e=new Fuse(t,tagsCompletionOptions).search(m).map((({item:{name:t}})=>t)),i=Array.from(new Set(e));n(28,f=i.length<=5&&i)}else n(28,f=void 0);if(50331648&t.$$.dirty[0]){const t=O||T?[]:void 0;O&&t.push(...O),T&&t.push(T),log.debug("allInvolvedUsers:",t),n(30,y=t)}if(1073741825&t.$$.dirty[0]|40&t.$$.dirty[1])if(s&&y&&x){const t=y.filter((({$id:t})=>!x.connectees.includes(t))),e=new Fuse(t,connecteesCompletionOptions).search(r).map((({item:t})=>({$id:t.$id,serialized:JSON.stringify(t)})));n(29,b=e.length<=5&&e)}else n(29,b=void 0);if(805306368&t.$$.dirty[0])if(f||b){const t=[];f&&t.push(...f.map((t=>({type:"tag",value:t})))),b&&t.push(...b.map((t=>({type:"connectee",value:t})))),n(5,v=t)}else n(5,v=void 0);32&t.$$.dirty[0]&&n(8,l=v?.length>0),32&t.$$.dirty[0]|1&t.$$.dirty[1]&&n(6,d=v?.[k]),1073741824&t.$$.dirty[0]&&n(38,u=y?.reduce(((t,e)=>({...t,[e.$id]:{$id:e.$id,serialized:JSON.stringify(e)}})),{})),1&t.$$.dirty[0]|128&t.$$.dirty[1]&&n(7,g=u&&x?x.connectees.map((t=>u[t])).filter((t=>t)):void 0),9&t.$$.dirty[0]|6&t.$$.dirty[1]&&x&&w&&(log.debug({search:x,lastFilterSelector:w}),tick().then((()=>{const t=_.querySelectorAll(":scope > "+w);log.debug("filtersNodeList:",t);const e=t.item(t.length-1);if(e){const t=i.getBoundingClientRect().left;_.scrollTo({left:e.getBoundingClientRect().left-t,behavior:"smooth"}),n(32,w=void 0)}})))},[x,R,h,_,p,v,d,g,l,c,a,q,function({detail:t}){C({...x,...resetOffset,tags:x.tags.filter((e=>e!==t))})},function({detail:t}){C({...x,...resetOffset,connectees:x.connectees.filter((e=>e!==t))})},S,D,j,function(){E(),h.focus()},function(t){log.debug({key:t.key}),"Escape"===t.key&&(A||i)===document.activeElement&&(t.preventDefault(),E())},function(t){switch(t.key){case"Enter":switch(d?.type){case"tag":D({detail:d.value});break;case"connectee":j({detail:d.value.$id})}break;case"ArrowDown":n(31,k=Math.min(v?.length-1,k+1)||0),t.stopPropagation(),t.preventDefault();break;case"ArrowUp":k>0?n(31,k=Math.max(0,k-1)):P(),t.stopPropagation(),t.preventDefault();break;default:["ArrowLeft","ArrowRight"].includes(t.key)||P()}},P,$,I,N,O,T,A,z,f,b,y,k,w,i,r,o,s,m,u,function(e){bubble.call(this,t,e)},function(t){binding_callbacks[t?"unshift":"push"]((()=>{_=t,n(3,_)}))},function(t){binding_callbacks[t?"unshift":"push"]((()=>{h=t,n(2,h)}))},function(){p=this.value,n(4,p),n(0,x)}]}class Search_bar extends SvelteElement{constructor(t){super();const e=document.createElement("style");e.textContent=".bold{font-weight:700;font-weight:bold;font-weight:var(--bold-font-weight,bold)}.nowrap{white-space:nowrap}.border-box{box-sizing:border-box}.p0{padding:0}@media(min-width:40em){}@media(min-width:52em){}@media(min-width:64em){}.flex{display:flex}@media(min-width:40em){}@media(min-width:52em){}@media(min-width:64em){}.flex-column{flex-direction:column}.items-center{align-items:center}.absolute{position:absolute}.left-0{left:0}.border-none{border:0}@media(max-width:40em){}@media(min-width:40em) and (max-width:52em){}@media(min-width:52em) and (max-width:64em){}@media(min-width:64em){}.btn{font-family:inherit;font-size:inherit;font-weight:bold;text-decoration:none;cursor:pointer;display:inline-block;line-height:1.125rem;padding:.5rem 1rem;margin:0;height:auto;border:1px solid transparent;vertical-align:middle;-webkit-appearance:none;color:inherit;background-color:transparent}.btn:hover{text-decoration:none}.btn:focus{outline:none;border-color:rgba(0, 0, 0, .125);box-shadow:0 0 0 3px rgba(0, 0, 0, .25)}::-moz-focus-inner{border:0;padding:0}.no-scrollbar{scrollbar-width:none\n}.no-scrollbar::-webkit-scrollbar{display:none}@media(hover: hover){.hover-fx:not([disabled]):hover{opacity:0.75}}:host .hstretch,:host>.hstretch{width:100%}:host .vstretch,:host>.vstretch{height:100%}:host{--anim-duration:0.25s}:where(.animated){transition-duration:var(--anim-duration);transition-timing-function:ease-in-out;transition-property:color, background-color, opacity, visibility, height, width, transform, \n    transform-origin, filter, left, top, right, no-prop}.bg-transparent{background-color:transparent}.sky{color:rgb(88,146,246);color:rgb(var(--sky))}.no-focus:focus,:focus{outline:0;box-shadow:none}input{border-radius:0;font-family:'Hasteristico', 'heimdall-widget-base-font';letter-spacing:0.05em;color:var(--font-color)}input:invalid{color:rgb(255,85,112);color:rgb(var(--pinkred))}input::-moz-placeholder{color:rgba(235,235,235, 0.35);color:rgba(var(--eggshell), 0.35);transition-duration:var(--anim-duration);transition-timing-function:ease-in-out;-moz-transition-property:color;transition-property:color}input::placeholder{color:rgba(235,235,235, 0.35);color:rgba(var(--eggshell), 0.35);transition-duration:var(--anim-duration);transition-timing-function:ease-in-out;transition-property:color}input:focus::-moz-placeholder{color:rgba(235,235,235, 0.2);color:rgba(var(--eggshell), 0.2)}input:focus::placeholder{color:rgba(235,235,235, 0.2);color:rgba(var(--eggshell), 0.2)}.overflow-x-scroll{overflow-x:scroll}.not-visible{visibility:hidden;opacity:0}:host{--input-min-width:10em;--input-margin-left:0.4em;position:relative;display:flex;box-sizing:border-box;align-items:center;height:100%;width:100%;--stop:0.36rem;--opacity:0.3;background-image:linear-gradient(to top, rgba(187,183,76, var(--opacity)), rgba(187,183,76, var(--opacity)) var(--stop), transparent var(--stop));background-image:linear-gradient(to top, rgba(var(--gold), var(--opacity)), rgba(var(--gold), var(--opacity)) var(--stop), transparent var(--stop))}.filters{--gradient-width:clamp(0.8em, 10%, 2em)\n  }.filters:not(:empty){padding:0 var(--gradient-width);max-width:calc(100% - (var(--input-margin-left) + var(--input-min-width)))}.filters{-webkit-mask-image:linear-gradient(\n      to right,\n      transparent,\n      white var(--gradient-width),\n      white calc(100% - var(--gradient-width)),\n      transparent\n    );mask-image:linear-gradient(\n      to right,\n      transparent,\n      white var(--gradient-width),\n      white calc(100% - var(--gradient-width)),\n      transparent\n    )\n  }.filters>*:not(:last-child){margin-right:1.43em}.tag{font-size:0.688em}:is(input, input:focus)::-moz-placeholder{color:transparent}:is(input, input:focus)::placeholder{color:transparent}input{font-size:2em;letter-spacing:0.0465em;margin:0 0 0 var(--input-margin-left);flex:1 1 auto;min-width:var(--input-min-width);transition-property:color, background-color, opacity, visibility, height, width, transform, \n    transform-origin, filter, left, top, right, background-position\n  }input:-moz-placeholder-shown{background:url(https://janouma.github.io/heimdall-layouts/shared_components/search_bar/assets/images/magnifying-glass.svg) no-repeat;background-size:1em auto;background-position:left center\n    }input:placeholder-shown{background:url(https://janouma.github.io/heimdall-layouts/shared_components/search_bar/assets/images/magnifying-glass.svg) no-repeat;background-size:1em auto;background-position:left center\n    }input:-moz-placeholder-shown:focus{background-position:0.35em center;transition-duration:calc(var(--anim-duration) / 2)}input:placeholder-shown:focus{background-position:0.35em center;transition-duration:calc(var(--anim-duration) / 2)}input:not(:focus)~.completion{visibility:hidden;opacity:0}input:not(:-moz-placeholder-shown)~.found-items-count{right:1.125em}input:not(:placeholder-shown)~.found-items-count,.filters:not(:empty)~.found-items-count{right:1.125em}input:not(:-moz-placeholder-shown)~loading-animation{right:2.125em}input:not(:placeholder-shown)~loading-animation,.filters:not(:empty)~loading-animation{right:2.125em}input:not(:-moz-placeholder-shown)~.query-clearer{visibility:visible\n    }input:not(:placeholder-shown)~.query-clearer,.filters:not(:empty)~.query-clearer{visibility:visible\n    }@media(hover: hover){input:not(:-moz-placeholder-shown)~.query-clearer:not(:hover){opacity:1}input:not(:placeholder-shown)~.query-clearer:not(:hover),.filters:not(:empty)~.query-clearer:not(:hover){opacity:1}}@media(hover: none){input:not(:-moz-placeholder-shown)~.query-clearer{opacity:1\n    }input:not(:placeholder-shown)~.query-clearer,.filters:not(:empty)~.query-clearer{opacity:1\n    }}.completion{top:calc(100% + 0.14em);padding:0.64em;background-color:rgba(51,50,77, 0.75);background-color:rgba(var(--deepwater), 0.75);grid-row-gap:0.5em;row-gap:0.5em\n  }.completion user-tag{cursor:pointer;height:2.125em}user-tag,word-tag{border-radius:0.25em;transition-duration:0.125s}word-tag{display:block;font-size:0.88em}.highlighted{background-color:rgba(88,146,246, 75%);background-color:rgba(var(--sky), 75%)}.found-items-count,loading-animation{right:0.35em;top:50%;transform:translateY(-50%);pointer-events:none}.found-items-count{font-size:2em;font-weight:bold;color:rgba(235,235,235, 0.35);color:rgba(var(--eggshell), 0.35)}loading-animation{height:50%}.query-clearer{--size:1.5em;right:0.35em;top:50%;transform:translateY(-50%);width:var(--size);height:var(--size);background:url(https://janouma.github.io/heimdall-layouts/shared_components/search_bar/assets/images/circled_cross.svg) no-repeat;background-size:100% auto;padding:0;margin:0\n  }.query-clearer::after{--expanse:50%;content:'';position:absolute;top:0;left:0;width:100%;height:100%;border-radius:50%;margin:calc(-1 * var(--expanse));padding:var(--expanse)}",this.shadowRoot.appendChild(e),init(this,{target:this.shadowRoot,props:attribute_to_object(this.attributes),customElement:!0},instance,create_fragment,not_equal,{messages:21,search:0,tagaliases:22,tags:23,connections:24,user:25,activableelement:26,searching:1,itemscount:27},null,[-1,-1]),t&&(t.target&&insert(t.target,this,t.anchor),t.props&&(this.$set(t.props),flush()))}static get observedAttributes(){return["messages","search","tagaliases","tags","connections","user","activableelement","searching","itemscount"]}get messages(){return this.$$.ctx[21]}set messages(t){this.$$set({messages:t}),flush()}get search(){return this.$$.ctx[0]}set search(t){this.$$set({search:t}),flush()}get tagaliases(){return this.$$.ctx[22]}set tagaliases(t){this.$$set({tagaliases:t}),flush()}get tags(){return this.$$.ctx[23]}set tags(t){this.$$set({tags:t}),flush()}get connections(){return this.$$.ctx[24]}set connections(t){this.$$set({connections:t}),flush()}get user(){return this.$$.ctx[25]}set user(t){this.$$set({user:t}),flush()}get activableelement(){return this.$$.ctx[26]}set activableelement(t){this.$$set({activableelement:t}),flush()}get searching(){return this.$$.ctx[1]}set searching(t){this.$$set({searching:t}),flush()}get itemscount(){return this.$$.ctx[27]}set itemscount(t){this.$$set({itemscount:t}),flush()}}customElements.define("search-bar",Search_bar);export default Search_bar;